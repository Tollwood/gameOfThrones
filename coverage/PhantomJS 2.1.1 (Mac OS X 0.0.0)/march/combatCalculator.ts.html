<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for march/combatCalculator.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">march/</a> combatCalculator.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">28.33% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>17/60</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/17</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">27.27% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>3/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">27.12% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>16/59</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">(function(global){global.wrappers['/Users/taamato1/pdev/gameOfThrones/src/logic/march/combatCalculator.ts']=[function(require,module,exports,__dirname,__filename){ "use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var combatResult_1 = require("./combatResult");
var orderToken_1 = require("../orderToken/orderToken");
var cardExecutionPoint_1 = require("../cards/cardExecutionPoint");
var cardAbilities_1 = require("../cards/cardAbilities");
var unitType_1 = require("../units/unitType");
var gameRules_1 = require("../board/gameRules/gameRules");
var CombatCalculator = /** @class */ (function () {
<span class="fstat-no" title="function not covered" >    function CombatCalculator() {</span>
    }
    CombatCalculator.calculateCombat = <span class="fstat-no" title="function not covered" >function (sourceArea, targetArea, attackersCard, defendersCard) {</span>
<span class="cstat-no" title="statement not covered" >        var attackerStrength = this.calculateStrengthOfArmy(sourceArea.units);</span>
<span class="cstat-no" title="statement not covered" >        attackerStrength += this.calculateOrderTokenStrengh(sourceArea.orderToken.getType(), true);</span>
<span class="cstat-no" title="statement not covered" >        var defenderStrength = this.calculateStrengthOfArmy(targetArea.units);</span>
<span class="cstat-no" title="statement not covered" >        defenderStrength += this.calculateOrderTokenStrengh(targetArea.orderToken.getType(), false);</span>
<span class="cstat-no" title="statement not covered" >        var combatResult = new combatResult_1.default(sourceArea, targetArea, attackersCard, defendersCard, attackerStrength, defenderStrength, attackersCard.sword, attackersCard.fortification, defendersCard.sword, defendersCard.fortification);</span>
<span class="cstat-no" title="statement not covered" >        this.resolveHouseCard(combatResult, cardExecutionPoint_1.CardExecutionPoint.beforeFight);</span>
<span class="cstat-no" title="statement not covered" >        return combatResult;</span>
    };
    CombatCalculator.calculateOrderTokenStrengh = <span class="fstat-no" title="function not covered" >function (orderTokenType, attacking) {</span>
<span class="cstat-no" title="statement not covered" >        var strength = 0;</span>
<span class="cstat-no" title="statement not covered" >        if (attacking) {</span>
<span class="cstat-no" title="statement not covered" >            switch (orderTokenType) {</span>
                case orderToken_1.OrderTokenType.march_minusOne:
<span class="cstat-no" title="statement not covered" >                    strength -= 1;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                case orderToken_1.OrderTokenType.march_special:
<span class="cstat-no" title="statement not covered" >                    strength += 1;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                default:
<span class="cstat-no" title="statement not covered" >                    strength += 0;</span>
            }
        }
        else {
<span class="cstat-no" title="statement not covered" >            switch (orderTokenType) {</span>
                case orderToken_1.OrderTokenType.defend_1:
                case orderToken_1.OrderTokenType.defend_0:
<span class="cstat-no" title="statement not covered" >                    strength += 1;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                case orderToken_1.OrderTokenType.defend_special:
<span class="cstat-no" title="statement not covered" >                    strength += 2;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                default:
<span class="cstat-no" title="statement not covered" >                    strength += 0;</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        return strength;</span>
    };
    CombatCalculator.calculateStrengthOfArmy = <span class="fstat-no" title="function not covered" >function (units) {</span>
<span class="cstat-no" title="statement not covered" >        var strength = 0;</span>
<span class="cstat-no" title="statement not covered" >        units.forEach(<span class="fstat-no" title="function not covered" >function (unit) {</span></span>
<span class="cstat-no" title="statement not covered" >            switch (unit.getType()) {</span>
                case unitType_1.UnitType.Footman:
<span class="cstat-no" title="statement not covered" >                    strength += 1;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                case unitType_1.UnitType.Horse:
<span class="cstat-no" title="statement not covered" >                    strength += 2;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                case unitType_1.UnitType.Siege:
<span class="cstat-no" title="statement not covered" >                    strength += 4;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                case unitType_1.UnitType.Ship:
<span class="cstat-no" title="statement not covered" >                    strength += 1;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
            }
        });
<span class="cstat-no" title="statement not covered" >        return strength;</span>
    };
    CombatCalculator.resolveHouseCard = <span class="fstat-no" title="function not covered" >function (combatResult, cardExecutionPoint) {</span>
<span class="cstat-no" title="statement not covered" >        var cardsToResolve = new Array();</span>
<span class="cstat-no" title="statement not covered" >        if (combatResult.attackersCard.cardExecutionPoint === cardExecutionPoint) {</span>
<span class="cstat-no" title="statement not covered" >            cardsToResolve.push(combatResult.attackersCard);</span>
        }
<span class="cstat-no" title="statement not covered" >        if (combatResult.defendersCard.cardExecutionPoint === cardExecutionPoint) {</span>
<span class="cstat-no" title="statement not covered" >            cardsToResolve.push(combatResult.defendersCard);</span>
        }
<span class="cstat-no" title="statement not covered" >        cardsToResolve.sort(<span class="fstat-no" title="function not covered" >function (a, b) {</span></span>
<span class="cstat-no" title="statement not covered" >            return gameRules_1.default.gameState.ironThroneSuccession.indexOf(a.house) - gameRules_1.default.gameState.ironThroneSuccession.indexOf(b.house);</span>
        });
<span class="cstat-no" title="statement not covered" >        cardsToResolve.forEach(<span class="fstat-no" title="function not covered" >function (card) {</span></span>
<span class="cstat-no" title="statement not covered" >            cardAbilities_1.default[card.abilityFn](card, combatResult);</span>
        });
    };
    return CombatCalculator;
}());
exports.default = CombatCalculator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tYmF0Q2FsY3VsYXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbWJhdENhbGN1bGF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSwrQ0FBMEM7QUFDMUMsdURBQXdEO0FBRXhELGtFQUErRDtBQUMvRCx3REFBbUQ7QUFFbkQsOENBQTJDO0FBQzNDLDBEQUFxRDtBQUNyRDtJQUFBO0lBaUZBLENBQUM7SUEvRWlCLGdDQUFlLEdBQTdCLFVBQThCLFVBQWdCLEVBQUUsVUFBZ0IsRUFBRSxhQUF3QixFQUFFLGFBQXdCO1FBRWhILElBQUksZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0RSxnQkFBZ0IsSUFBSSxJQUFJLENBQUMsMEJBQTBCLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMzRixJQUFJLGdCQUFnQixHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEUsZ0JBQWdCLElBQUksSUFBSSxDQUFDLDBCQUEwQixDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUYsSUFBSSxZQUFZLEdBQUcsSUFBSSxzQkFBWSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbE8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSx1Q0FBa0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsWUFBWSxDQUFDO0lBQ3hCLENBQUM7SUFFYywyQ0FBMEIsR0FBekMsVUFBMEMsY0FBOEIsRUFBRSxTQUFrQjtRQUN4RixJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDakIsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNaLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JCLEtBQUssMkJBQWMsQ0FBQyxjQUFjO29CQUM5QixRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztnQkFDVixLQUFLLDJCQUFjLENBQUMsYUFBYTtvQkFDN0IsUUFBUSxJQUFJLENBQUMsQ0FBQztvQkFDZCxLQUFLLENBQUM7Z0JBQ1Y7b0JBQ0ksUUFBUSxJQUFJLENBQUMsQ0FBQztZQUN0QixDQUFDO1FBQ0wsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztnQkFDckIsS0FBSywyQkFBYyxDQUFDLFFBQVEsQ0FBQztnQkFDN0IsS0FBSywyQkFBYyxDQUFDLFFBQVE7b0JBQ3hCLFFBQVEsSUFBSSxDQUFDLENBQUM7b0JBQ2QsS0FBSyxDQUFDO2dCQUNWLEtBQUssMkJBQWMsQ0FBQyxjQUFjO29CQUM5QixRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztnQkFDVjtvQkFDSSxRQUFRLElBQUksQ0FBQyxDQUFDO1lBQ3RCLENBQUM7UUFDTCxDQUFDO1FBRUQsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUNwQixDQUFDO0lBRWMsd0NBQXVCLEdBQXRDLFVBQXVDLEtBQWtCO1FBQ3JELElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNqQixLQUFLLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBSTtZQUNmLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JCLEtBQUssbUJBQVEsQ0FBQyxPQUFPO29CQUNqQixRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztnQkFDVixLQUFLLG1CQUFRLENBQUMsS0FBSztvQkFDZixRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztnQkFDVixLQUFLLG1CQUFRLENBQUMsS0FBSztvQkFDZixRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztnQkFDVixLQUFLLG1CQUFRLENBQUMsSUFBSTtvQkFDZCxRQUFRLElBQUksQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQztZQUNkLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDcEIsQ0FBQztJQUVhLGlDQUFnQixHQUE5QixVQUErQixZQUEwQixFQUFFLGtCQUFzQztRQUM3RixJQUFJLGNBQWMsR0FBRyxJQUFJLEtBQUssRUFBYSxDQUFDO1FBQzVDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsa0JBQWtCLEtBQUssa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1lBQ3ZFLGNBQWMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3BELENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLGtCQUFrQixLQUFLLGtCQUFrQixDQUFDLENBQUMsQ0FBQztZQUN2RSxjQUFjLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBQ0QsY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxtQkFBUyxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLG1CQUFTLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakksQ0FBQyxDQUFDLENBQUM7UUFFSCxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBSTtZQUN4Qix1QkFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ0wsdUJBQUM7QUFBRCxDQUFDLEFBakZELElBaUZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBcmVhfSBmcm9tICcuLi9ib2FyZC9hcmVhJztcbmltcG9ydCBDb21iYXRSZXN1bHQgZnJvbSAnLi9jb21iYXRSZXN1bHQnO1xuaW1wb3J0IHtPcmRlclRva2VuVHlwZX0gZnJvbSAnLi4vb3JkZXJUb2tlbi9vcmRlclRva2VuJztcbmltcG9ydCBIb3VzZUNhcmQgZnJvbSAnLi4vY2FyZHMvaG91c2VDYXJkJztcbmltcG9ydCB7Q2FyZEV4ZWN1dGlvblBvaW50fSBmcm9tICcuLi9jYXJkcy9jYXJkRXhlY3V0aW9uUG9pbnQnO1xuaW1wb3J0IENhcmRBYmlsaXRpZXMgZnJvbSAnLi4vY2FyZHMvY2FyZEFiaWxpdGllcyc7XG5pbXBvcnQgVW5pdCBmcm9tICcuLi91bml0cy91bml0cyc7XG5pbXBvcnQge1VuaXRUeXBlfSBmcm9tICcuLi91bml0cy91bml0VHlwZSc7XG5pbXBvcnQgR2FtZVJ1bGVzIGZyb20gJy4uL2JvYXJkL2dhbWVSdWxlcy9nYW1lUnVsZXMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tYmF0Q2FsY3VsYXRvciB7XG5cbiAgICBwdWJsaWMgc3RhdGljIGNhbGN1bGF0ZUNvbWJhdChzb3VyY2VBcmVhOiBBcmVhLCB0YXJnZXRBcmVhOiBBcmVhLCBhdHRhY2tlcnNDYXJkOiBIb3VzZUNhcmQsIGRlZmVuZGVyc0NhcmQ6IEhvdXNlQ2FyZCk6IENvbWJhdFJlc3VsdCB7XG5cbiAgICAgICAgbGV0IGF0dGFja2VyU3RyZW5ndGggPSB0aGlzLmNhbGN1bGF0ZVN0cmVuZ3RoT2ZBcm15KHNvdXJjZUFyZWEudW5pdHMpO1xuICAgICAgICBhdHRhY2tlclN0cmVuZ3RoICs9IHRoaXMuY2FsY3VsYXRlT3JkZXJUb2tlblN0cmVuZ2goc291cmNlQXJlYS5vcmRlclRva2VuLmdldFR5cGUoKSwgdHJ1ZSk7XG4gICAgICAgIGxldCBkZWZlbmRlclN0cmVuZ3RoID0gdGhpcy5jYWxjdWxhdGVTdHJlbmd0aE9mQXJteSh0YXJnZXRBcmVhLnVuaXRzKTtcbiAgICAgICAgZGVmZW5kZXJTdHJlbmd0aCArPSB0aGlzLmNhbGN1bGF0ZU9yZGVyVG9rZW5TdHJlbmdoKHRhcmdldEFyZWEub3JkZXJUb2tlbi5nZXRUeXBlKCksIGZhbHNlKTtcbiAgICAgICAgbGV0IGNvbWJhdFJlc3VsdCA9IG5ldyBDb21iYXRSZXN1bHQoc291cmNlQXJlYSwgdGFyZ2V0QXJlYSwgYXR0YWNrZXJzQ2FyZCwgZGVmZW5kZXJzQ2FyZCwgYXR0YWNrZXJTdHJlbmd0aCwgZGVmZW5kZXJTdHJlbmd0aCwgYXR0YWNrZXJzQ2FyZC5zd29yZCwgYXR0YWNrZXJzQ2FyZC5mb3J0aWZpY2F0aW9uLCBkZWZlbmRlcnNDYXJkLnN3b3JkLCBkZWZlbmRlcnNDYXJkLmZvcnRpZmljYXRpb24pO1xuICAgICAgICB0aGlzLnJlc29sdmVIb3VzZUNhcmQoY29tYmF0UmVzdWx0LCBDYXJkRXhlY3V0aW9uUG9pbnQuYmVmb3JlRmlnaHQpO1xuICAgICAgICByZXR1cm4gY29tYmF0UmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZU9yZGVyVG9rZW5TdHJlbmdoKG9yZGVyVG9rZW5UeXBlOiBPcmRlclRva2VuVHlwZSwgYXR0YWNraW5nOiBib29sZWFuKSB7XG4gICAgICAgIGxldCBzdHJlbmd0aCA9IDA7XG4gICAgICAgIGlmIChhdHRhY2tpbmcpIHtcbiAgICAgICAgICAgIHN3aXRjaCAob3JkZXJUb2tlblR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE9yZGVyVG9rZW5UeXBlLm1hcmNoX21pbnVzT25lOlxuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE9yZGVyVG9rZW5UeXBlLm1hcmNoX3NwZWNpYWw6XG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoICs9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG9yZGVyVG9rZW5UeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBPcmRlclRva2VuVHlwZS5kZWZlbmRfMTpcbiAgICAgICAgICAgICAgICBjYXNlIE9yZGVyVG9rZW5UeXBlLmRlZmVuZF8wOlxuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE9yZGVyVG9rZW5UeXBlLmRlZmVuZF9zcGVjaWFsOlxuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aCArPSAyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aCArPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZVN0cmVuZ3RoT2ZBcm15KHVuaXRzOiBBcnJheTxVbml0Pik6IG51bWJlciB7XG4gICAgICAgIGxldCBzdHJlbmd0aCA9IDA7XG4gICAgICAgIHVuaXRzLmZvckVhY2goKHVuaXQpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAodW5pdC5nZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFVuaXRUeXBlLkZvb3RtYW46XG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVW5pdFR5cGUuSG9yc2U6XG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVW5pdFR5cGUuU2llZ2U6XG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgVW5pdFR5cGUuU2hpcDpcbiAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RyZW5ndGg7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZXNvbHZlSG91c2VDYXJkKGNvbWJhdFJlc3VsdDogQ29tYmF0UmVzdWx0LCBjYXJkRXhlY3V0aW9uUG9pbnQ6IENhcmRFeGVjdXRpb25Qb2ludCkge1xuICAgICAgICBsZXQgY2FyZHNUb1Jlc29sdmUgPSBuZXcgQXJyYXk8SG91c2VDYXJkPigpO1xuICAgICAgICBpZiAoY29tYmF0UmVzdWx0LmF0dGFja2Vyc0NhcmQuY2FyZEV4ZWN1dGlvblBvaW50ID09PSBjYXJkRXhlY3V0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgIGNhcmRzVG9SZXNvbHZlLnB1c2goY29tYmF0UmVzdWx0LmF0dGFja2Vyc0NhcmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbWJhdFJlc3VsdC5kZWZlbmRlcnNDYXJkLmNhcmRFeGVjdXRpb25Qb2ludCA9PT0gY2FyZEV4ZWN1dGlvblBvaW50KSB7XG4gICAgICAgICAgICBjYXJkc1RvUmVzb2x2ZS5wdXNoKGNvbWJhdFJlc3VsdC5kZWZlbmRlcnNDYXJkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXJkc1RvUmVzb2x2ZS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gR2FtZVJ1bGVzLmdhbWVTdGF0ZS5pcm9uVGhyb25lU3VjY2Vzc2lvbi5pbmRleE9mKGEuaG91c2UpIC0gR2FtZVJ1bGVzLmdhbWVTdGF0ZS5pcm9uVGhyb25lU3VjY2Vzc2lvbi5pbmRleE9mKGIuaG91c2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYXJkc1RvUmVzb2x2ZS5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAgICAgICBDYXJkQWJpbGl0aWVzW2NhcmQuYWJpbGl0eUZuXShjYXJkLCBjb21iYXRSZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9XG59Il19
},'src/logic/march/combatCalculator.ts',{"../board/area":"/Users/taamato1/pdev/gameOfThrones/src/logic/board/area.ts","./combatResult":"/Users/taamato1/pdev/gameOfThrones/src/logic/march/combatResult.ts","../orderToken/orderToken":"/Users/taamato1/pdev/gameOfThrones/src/logic/orderToken/orderToken.ts","../cards/houseCard":"/Users/taamato1/pdev/gameOfThrones/src/logic/cards/houseCard.ts","../cards/cardExecutionPoint":"/Users/taamato1/pdev/gameOfThrones/src/logic/cards/cardExecutionPoint.ts","../cards/cardAbilities":"/Users/taamato1/pdev/gameOfThrones/src/logic/cards/cardAbilities.ts","../units/units":"/Users/taamato1/pdev/gameOfThrones/src/logic/units/units.ts","../units/unitType":"/Users/taamato1/pdev/gameOfThrones/src/logic/units/unitType.ts","../board/gameRules/gameRules":"/Users/taamato1/pdev/gameOfThrones/src/logic/board/gameRules/gameRules.ts"}];})(this);
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Oct 28 2017 18:03:52 GMT+0200 (CEST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
